<p-toast></p-toast>

<p-button label="Add Student" icon="pi pi-plus" (click)="openNewStudentDialog()"></p-button>

<p-table [value]="students" [paginator]="true" [rows]="5" styleClass="p-mt-3">
  <ng-template pTemplate="header">
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Email</th>
      <th>Course</th>
      <th>Actions</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-student>
    <tr>
      <td>{{student.id}}</td>
      <td>{{student.name}}</td>
      <td>{{student.email}}</td>
      <td>{{student.course}}</td>
      <td>
        <button pButton icon="pi pi-pencil" class="p-button-rounded p-button-text" (click)="openEditStudentDialog(student)"></button>
        <button pButton icon="pi pi-trash" class="p-button-rounded p-button-danger" (click)="openDeleteDialog(student)"></button>
      </td>
    </tr>
  </ng-template>
</p-table>

<!-- Child dialog -->
<app-create-student
  [(visible)]="displayDialog"
  [student]="selectedStudent"
  [isEditMode]="isEditMode"
  (save)="saveStudent($event)"
  (cancel)="cancelDialog()"
></app-create-student>


<!-- Delete Confirmation Dialog -->
<p-dialog 
    header="Confirm Delete" 
    [(visible)]="deleteDialogVisible" 
    [modal]="true" 
    [closable]="false"
    [style]="{width: '400px'}">

  <p>Are you sure you want to delete <strong>{{studentToDelete?.name}}</strong>?</p>

  <p-footer>
    <button pButton 
            type="button" 
            label="Cancel" 
            icon="pi pi-times" 
            class="p-button-text" 
            (click)="cancelDelete()">
    </button>

    <button pButton 
            type="button" 
            label="Delete" 
            icon="pi pi-check" 
            class="p-button-danger" 
            (click)="confirmDelete()">
    </button>
  </p-footer>
</p-dialog>